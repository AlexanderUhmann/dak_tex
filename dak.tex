\documentclass[a4paper,12pt, listof=totoc]{scrreprt}
\usepackage[T2A]{fontenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx} % графики
\usepackage{subfigure} % пакет упрощает нескольких рисунков внутри одного плавающего объекта, причемпомимо общей подписи каждый рисунок иожет иметь свою общую
\usepackage{pdfpages}
\usepackage{xcolor}
\usepackage{float}
\usepackage{amsmath} % математические символы
\graphicspath{ {images/} }
\usepackage[utf8]{inputenc}    % кодировка
\usepackage[english,russian]{babel}
\usepackage{varioref}
\usepackage{indentfirst}


%------------------------------ Межстрочный интервал
\usepackage{indentfirst}
\setlength{\parindent}{1.25cm}    % красная строка
\usepackage{setspace}
\onehalfspacing                  % полуторный интервал


%------------------------------------- Колонтитулы
\usepackage{fancybox,fancyhdr}
\renewcommand{\headrulewidth}{0pt} % убрать разделительную линию.
\fancyhf{} % очистка текущих значений

% ----------------Отступы
\usepackage[%textwidth=19cm,
            %textheight=20cm,
            left=2.5cm,
            right=2cm,
            top=2cm,
            bottom=3cm, 
           ]{geometry} % поля
\usepackage{ragged2e}
\usepackage{titlesec}
\titleformat{\chapter}%
  {\normalfont\bfseries\Large\centering} % оформление текста заголовка
   {\MakeUppercase{Глава \thechapter.}}
  {0.5em}
  {\MakeUppercase}

\titlespacing*{\chapter}{0pt}{-1em}{0.5em}
\titleformat{\section}
  {\normalfont\bfseries\large\centering}
  {\thesection}
  {1em}
  {}  
  
\titlespacing*{\section}{0pt}{0.5em}{0.5em}

\titleformat{\subsection}
  {\normalfont\bfseries\normalsize\centering}
  {\thesubsection}
  {1em}
  {}
  
\titlespacing*{\subsection}{0pt}{0.5em}{0.25em}
  
\setlength{\textfloatsep}{5pt plus 1.0pt minus 2.0pt}
\setlength{\floatsep}{5pt plus 5.0pt minus 5.0pt}
\setlength{\intextsep}{5pt plus 5.0pt minus 5.0pt}
\titlespacing*{\paragraph}{0pt}{0pt}{0cm}
\usepackage{indentfirst}
\usepackage{babel}
\usepackage{setspace}
\usepackage[nottoc]{tocbibind}
\usepackage{indentfirst}
\usepackage{graphicx}
\usepackage{indentfirst}


% --- Прочие полезные пакеты ---
\usepackage{tikz}              % для рисунков
\usepackage{fontawesome}       % иконки
\usepackage{cmap}              % корректный поиск в PDF


%-----------------------------Таблицы  
\usepackage{caption} %заголовки плавающих объектов
\usepackage{float}  
\usepackage{placeins}
\usepackage{array, longtable}
\usepackage{booktabs} 
\renewcommand{\thetable}{\thesection.\arabic{table}}   % Формат таблицы секция.номер
\captionsetup[table]{format = plain, font={small}, textfont = normal}

\usepackage{colortbl}
\renewcommand{\tabcolsep}{0.2cm}   %% increase table column spacing
\newcommand{\specialcell}[2][c]{%
\begin{tabular}[#1]{@{}c@{}}#2\end{tabular}} % Перенос строки в таблице

%-----------------------------Главы 
\makeatletter
\renewcommand{\@seccntformat}[1]{\csname the#1\endcsname.\;} %Точка после section
\def\sectionsuffix{.}
\makeatother

\usepackage{tocloft}
\makeatletter
\makeatother

\renewcommand{\cftchapfont}{\bfseries}
\renewcommand{\cftchapfont}{}
\renewcommand{\cftchappresnum}{Глава }
\renewcommand{\cftchapaftersnum}{.}
\renewcommand{\cftchapnumwidth}{4.5em}
\setlength{\cftbeforetoctitleskip}{-12pt} % отступ перед оглавлением
\setlength{\cftaftertoctitleskip}{10pt} % отступ после оглавления
\addto{\captionsrussian}{%
 \renewcommand{\contentsname}{\Large{\hspace*{6cm}ОГЛАВЛЕНИЕ}}}%

\makeatletter
\renewcommand{\l@section}{\@dottedtocline{1}{0em}{4.5em}} % 0em отступ секции в оглавлении
\renewcommand{\l@subsection}{\@dottedtocline{1}{0em}{4.5em}}
\renewcommand\cftchapdotsep{\cftdotsep} % Добавляем многоточие в главу
\renewcommand\cftchapleader{\cftdotfill{\cftchapdotsep}} % Добавляем многоточие в главу
\makeatother

\titlespacing{\chapter}{60pt}{-30pt}{20pt}
\setlength{\cftbeforetoctitleskip}{-30pt} % отступ перед оглавлением
\setlength{\cftaftertoctitleskip}{30pt} % отступ после оглавления 


\makeatletter % Убрать жирный шрифт номеров страниц в оглавлении
\let\oldl@chapter\l@chapter
\def\l@chapter#1#2{\oldl@chapter{#1}{\normalfont{#2}}}
\makeatother


%---------------------Сокращения----------------------- 
\newcommand*{\BE}{\begin{equation}} %
\newcommand*{\EN}{\end{equation}} %
\newcommand*{\nn}{\nonumber}
\newcommand*{\T}[1]{\text{#1}}
\makeatletter
\newcommand*{\rom}[1]{\expandafter\@slowromancap\romannumeral #1@}
\makeatother


%---------------Глубина нумерации глав,секций---------------
\setcounter{secnumdepth}{3}
\usepackage{amsmath}
\counterwithin{equation}{section} % Нумерация формул по секциям
\renewcommand{\theequation}{\thepart\arabic{equation}} % Убрать точку в формуле после part


%---------------Рисунки, графики---------------
\usepackage{caption}
\captionsetup[figure]
{format = plain, 
font = small, 
textfont = normal,
name = Рисунок}


%---------------Рисунки, графики---------------
\usepackage{amsthm}

\theoremstyle{break}
\newtheorem{theorem}{Теорема}
\newtheorem{example}{Пример}[section]
\newtheorem{notice}{Замечание}[section]
\newtheorem{df}{Определение}[section]
\newtheorem{comment}{Комментарий}[section]


% Двоеточие заменили на дефис

\RequirePackage{caption}
\DeclareCaptionLabelSeparator{defis}{ -- }
\captionsetup{justification=centering,labelsep=defis}

\renewcommand{\thefigure}{\thesection.\arabic{figure}}


%-----------------------------------Теоремы, определения, леммы
%\usepackage{theorem}
%\usepackage{amsthm}
%\theoremstyle{break}
%\newtheorem{theorem}{Th}
%\newtheorem{example}{Example}[section]
%\newtheorem{notice}{Замечание}[section]
%\newtheorem{df}{Определение}[section]


%----------------------------Python
\usepackage{listings}
\lstloadlanguages{Python}
\lstset{
  language=Python,
  basicstyle=\ttfamily\small,
  numbers=left,
  numberstyle=\tiny,
  frame=single,
  breaklines=true
}

\usepackage{chngcntr}
\AtBeginDocument{
  \counterwithout{lstlisting}{section}
  \renewcommand{\thelstlisting}{\arabic{lstlisting}}
}
\usepackage{caption}
\DeclareCaptionLabelSeparator{dash}{\space--\space}
\captionsetup[lstlisting]{labelformat=simple,
                                     labelsep=dash
                                     }

\usepackage{color}
\usepackage{xcolor}
\usepackage{tcolorbox}
\usepackage{titlesec}

\AtBeginDocument{
\renewcommand\listfigurename{Список иллюстративного материала}
\renewcommand\listtablename{Список таблиц}
\renewcommand\bibname{Список литературы}
\renewcommand\figurename{Рисунок}
\renewcommand\tablename{Таблица}
\renewcommand\chaptername{Глава}
\thispagestyle{empty} }


%----------------------------Библиография
\makeatletter
\renewcommand\@biblabel[1]{#1}
\makeatother


%-----------------гиперссылки
\usepackage{url}
\usepackage[   
    colorlinks=true,
    citecolor=black,
    anchorcolor=black,
    urlcolor=blue,     
    urlbordercolor={1 1 1},
    pdfauthor={L.Lamport},
    pagebordercolor={1 1 0},
    pdfborder={2 1 2 [6 0]},
    linkcolor=black,
    pdfhighlight=key
]{hyperref}
\captionsetup{figurewithin=none}  % Одноуровневая нумерация графиков
\captionsetup{tablewithin=none}   % Одноуровневая нумерация таблиц

\begin{document}
	\includepdf[pages=1]{titlepage.pdf} % Загружает только!!!
	\tableofcontents
	\clearpage 
	\setcounter{page}{3}  % Нумерация страниц начинается с 2-х
	\pagestyle{plain} % нумерация вкл. внизу, посередине
	
	\section*{\centering Введение} %\addcontentsline{toc}{section}{Введение}
	\addcontentsline{toc}{chapter}{Введение}
	
	\bibliography{references}
	\hyphenation{confusion}
	
	\textbf{Актуальность темы исследования}. В настоящее время, в условиях технологического развития, искусственный интеллект (далее ИИ) стал необходимым инструментом, позволяющим с высокой скоростью обрабатывать большие массивы данных. Для банковского сектора управление кредитными рисками является одной из ключевых задач, в частности оценка кредитоспособности заемщиков. В современном финансовом секторе Казахстана использование кредитного скоринга поднимает важный вопрос о справедливом доступе к потребительскому кредитованию. Кредитный скоринг -- это статистический процесс, позволяющий прогнозировать вероятность дефолта заемщика банка. Значимость кредитного скоринга для Казахстана определяется его ролью в снижении долговой нагрузки населения, ограничении массового заимствования и обеспечении устойчивого и эффективного развития финансового сектора.
	
	С развитием услуг микрокредитования и предоставления кредитов в рассрочку банки стали получать значительно больше заявок на кредит, что на первоначальном этапе было выгодно финансовым учреждениям. Однако по мере роста количества заявок анализ разнообразных кредитных историй клиентов стал сложной задачей для сотрудников банка, что приводило к снижению прибыли. В связи с этим возникает необходимость в автоматизации и оптимизации процесса оценки и выдачи кредитов с помощью технологий ИИ, что позволяет минимизировать кредитные риски для обеих сторон. Практическая значимость работы заключается в том, что результаты исследования могут быть использованы финансовыми организациями для повышения эффективности принятия кредитных решений. Применение алгоритмов машинного и глубокого обучения позволит банкам принимать более точные и обоснованные решения о кредитоспособности клиентов, снижая вероятность возникновения финансовых рисков.
	
	\textbf{Степень разработанности темы исследования}. Применение искусственного интеллекта в банковском кредитовании рассматривались в работах H. Sadok, F. Sakka и M.E. El Maknouzi, в магистерской диссертации Ш. Сяоюй, а также в исследованиях Г.З. Зиятбековой, А.А. Давыдовой и О.Л. Ксенофонтовой, посвященных использованию методов машинного обучения и интеллектуального анализа данных в банковской сфере. Данные работы свидетельствуют об устойчивом научном интересе внедрения ИИ в деятельность финансовых учреждений. Тем не менее для Казахстана данное направление является новым в контексте цифровизации финансового сектора и, следовательно, требует дальнейшего исследования.
	
	\textbf{Цель и задачи исследования} -- разработать метод прогнозирования дефолта клиента банка при выдаче кредита на основе методов машинного и глубокого обучения.
	Для достижения поставленной цели были определены следующие задачи:
	\begin{enumerate}
	       \item Провести анализ и предобработку данных о заемщиках.
               \item Обучить и протестировать модели классификации для прогнозирования дефолта.
               \item Подобрать гиперпараметры моделей для повышения качества прогнозирования дефолтных клиентов.
               \item Оценить качество моделей и проанализировать полученные результаты.
        \end{enumerate}
        
        \textbf{Объектом исследования} является выданный кредит банком и связанное с ним наступление либо отсутствие дефолта по выданным кредитам.
       
        \textbf{Предметом исследования} является кредитный скоринг для оценки риска невозврата кредита.
        
        Для достижения целей и задач исследования использовались следующие методы:
        \begin{itemize}
               \item машинного и глубокого обучения;
               \item статистического анализа;
               \item оценивания моделей;
               \item визуализации исторических данных.
        \end{itemize}
        
        \textbf{Научная новизна исследования} исследования заключается в следующем:
         \begin{itemize}
               \item после завершения работы добавим
        \end{itemize}
        
        \textbf{Информационной базой исследования} являлись платформы: kaggle, github, stackoverflow, нормативно-правовая база, научные статьи и монографии.
        
        \textbf{Структура и объем работы}. Выпускная квалификационная работа состоит из 3 глав, заключения, списка литературы, Х таблиц, Y рисунков и Z приложений.
        
        \textbf{Объем исследовательской работы:} 50 страниц.

		

	
	\chapter{Алгоритмы машинного обучения в кредитном скоринге}
       	
	\section{Предобработка данных}
	В данной работе используются обезличенные данные АО «Альфа-Банка» \footnote{Соревнование на данных кредитных историй [Электронный ресурс] / Open Data Science. URL: \url{https://ods.ai/competitions/dl-fintech-bki} (дата обращения: 25.11.2025) Загл. с экрана.}. Данные состоят из 12 файлов (\texttt{train\_data\_0.pq - train\_data\_11.pq}), содержащих информацию о платежах клиентов банка. В каждом из 12 файлов содержится информация о 250 000 клиентах. При этом один клиент может иметь несколько кредитов, и каждому такому клиенту соответствует персональный \texttt{id} (идентификационный номер). Отдельно имеется файл \texttt{train\_target.csv}, который состоит из 3 млн строк, и каждая строка соответствует клиенту с меткой (флагом) равной 0 (отсутствие дефолта) или 1 (наличие дефолта). 
	Задача предобработки данных состоит в структурировании исходной информации, т.е. формирование единого датасета, выделение важных признаков (колонок), выявление аномальных клиентов (определение аномальности  будет приведено ниже), визуализация данных и тестирование моделей МО и ГО на этих данных. Программный код формирования единого датасета реализован в листинге \ref{train_data_csv_all_py} (см. приложение А). 
%{\comment Пояснение к листингу \ref{train_data_csv_all_py}} 
	\begin{enumerate}
	       \item Строки 1 -- 3. Импортируются необходимые библиотеки: \texttt{pandas} -- для работы с табличными данными, \texttt{os} -- для работы с файловой системой и \texttt{pyarrow.parquet} -- для чтения файлов формата \texttt{.parquet}.
               \item Строка 5. Задается путь \texttt{path = "train\_data"} к папке,
в которой находятся исходные файлы формата \texttt{.pq}.
               \item Строки 6 -- 13. Запускается цикл \texttt{for}, который перебирает все файлы в папке \texttt{train\_data}. Формируется имя поочередного файла \texttt{train\_data\_i.pq}, создается объект \texttt{ParquetDataset} для текущего файла, из которого данные считываются в \texttt{DataFrame (df)}. Затем выполняется агрегация данных по признаку $id$, вычисляются средние значения признаков, после чего данные сохраняются в соответствующий \texttt{csv} -- файл в папку \texttt{train\_data\_csv\_all}.
               \item Строка 14. Выводится список файлов каталога $train\_data$ для проверки корректности формирования файлов.
               \item Строки 16 -- 21. Задается путь к папке с полученными \texttt{csv}-файлами \texttt{train\_data\_csv\_all}. Создается пустой список \texttt{frames} для последующего хранения отдельных \texttt{DataFrame}. Затем запускается цикл по всем \texttt{csv}-файлам в указанной папке и формируются файлы \texttt{train\_data\_i.csv}. Эти файлы считываются в \texttt{DataFrame(df)} и добавляются в список \texttt{frames}.
               \item Строки 23 -- 26.Все элементы списка $frames$ объединяются в единый \texttt{DataFrame result} с помощью функции \texttt{pd.concat}. Полученный датасет сохраняется в файл \texttt{1\_data\_csv\_all.csv}, после чего заново считывается в переменную \texttt{df\_all} для последующего анализа.
        \end{enumerate}
        
	\subsection{Метод главных компонент}
	\subsection{Определение аномальности клиента}
	
	\section{Базовые алгоритмы}
	\subsection{Деревья решений}
	\subsection{Случайный лес}
	\subsection{Градиентный бустинг}
	\subsection{Нейронные сети}
	
	\chapter{Тестирование моделей машинного обучения на всех данных}
	\subsection{Подбор гиперпараметров для алгоритмов машинного и глубокого обучения (нейронная сеть)}
	\subsection{Деревья решений. Подбор гиперпараметров}
	\subsection{Случайный лес. Подбор гиперпараметров}
	\subsection{Градиентный бустинг. Подбор гиперпараметров}
	\subsection{Нейронная сеть. Подбор гиперпараметров}
	
	\chapter{Разработка веб-приложения}
	\subsection{Библиотека $Streamlit$ языка Python для разработки приложения}
	\subsection{Дизайн и реализация приложения}
	
	\section*{Заключение}\addcontentsline{toc}{chapter}{Заключение}
	\begin{thebibliography}{00}
		
		\makeatletter
		\renewcommand\@biblabel[1]{#1}
		\makeatother	
		\bibitem[]{} \textbf{{\large Книги:}}
		\makeatletter
		\renewcommand\@biblabel[1]{#1.}
		\makeatother
		
%		\bibitem{book1} Давыдова, А.А. Анализ и оценка кредитоспособности заемщика финансовыми организациями: обзор подходов и методов оценки // Вестник ВУиТ. -- 2023. -- №1 (51). URL: \url{https://cyberleninka.ru/article/n/analiz-i-otsenka-kreditosposobnosti-zaemschika-finansovymi-organizatsiyami-obzor-podhodov-i-metodov-otsenki} (дата обращения: 14.11.2025).
		\bibitem{book2} Сяоюй, Ш. Разработка моделей кредитного скоринга заёмщиков коммерческих банков с использованием методов машинного обучения: магистерская диссертация // БГУ, Факультет прикладной математики и информатики, Кафедра математического моделирования и анализа данных. URL: \url{https://elib.bsu.by/handle/123456789/331793} (дата обращения: 14.11.2025).
%		\bibitem{book3} Sadok, H. Artificial intelligence and bank credit analysis: A review / Sakka, F., El Maknouzi, M.E. // Cogent Economics & Finance. -- 2025. -- С. 1 -- 13.
		
%		\makeatletter
%		\renewcommand\@biblabel[1]{#1}
%		\makeatother	
%		\bibitem[]{} \textbf{{\large Статьи:}}
%		\makeatletter
%		\renewcommand\@biblabel[1]{#1.}
%		\makeatother	
		
%		\bibitem{article1} Albanesi, S. Credit Scores: Performance and Equity / S. Albanesi, D.F. Vamossy,  // NBER Working Paper. -- 2024. -- No. 32917. С. 1 -- 59.
%		\bibitem{article2} Markov, A. Credit scoring methods: Latest trends and points to consider / A. Markov, Z. Seleznyova, V. Lapshin // The Journal of Finance and Data Science. -- 2022. -- №8. С. 180 -- 201.
%		\bibitem{article3} Provenzano A. R. Machine learning approach for credit scoring / A. R. Provenzano, D. Triﬁrò, A. Datteo, L. Giada, N. Jean, A. Riciputi, et al. arXiv:2008.01687. -- 2020. -- С. 1 -- 28. 
		
		\makeatletter
		\renewcommand\@biblabel[1]{#1}
		\makeatother
		\bibitem[]{} \textbf{{\large Интернет-ресурсы:}}
		\makeatletter
		\renewcommand\@biblabel[1]{#1.}
		\makeatother
		
		\bibitem{Mincowski} Метрические методы [Электронный ресурс] / Яндекс Практикум. URL: \url{https://education.yandex.ru/handbook/ml/article/metricheskiye-metody}. — Загл. с экрана.
		\bibitem{DecisionTree} DecisionTreeClassifier [Электронный ресурс] / Python-библиотека для машинного обучения. -- URL: \url{https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeClassifier.html}. — Загл. с экрана.
		\bibitem{github} Default of Credit Card Clients Dataset [Электронный ресурс] / Бизнес и конкурсная платформа по исследованию данных «Kaggle». -- URL: \url{https://www.kaggle.com/datasets/uciml/default-of-credit-card-clients-dataset/data?select=UCI_Credit_Card.csv}. — Загл. с экрана.
		\bibitem{GridSearch} GridSearchCV [Электронный ресурс] / Python-библиотека для машинного обучения. -- URL: \url{https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.GridSearchCV.html}. — Загл. с экрана.
		\bibitem{KNN2} KNeighborsClassifier [Электронный ресурс] / Python-библиотека для машинного обучения. -- URL: \url{https://scikit-learn.org/stable/modules/generated/sklearn.neighbors.KNeighborsClassifier.html}. — Загл. с экрана.
		\bibitem{PCA} PCA [Электронный ресурс] / Python-библиотека для машинного обучения. -- URL: \url{https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html}. — Загл. с экрана.
		\bibitem{KNN3} What is the k-nearest neighbors (KNN) algorithm? [Электронный ресурс] / International Business Machines. -- URL: \url{https://www.ibm.com/think/topics/knnl}. — Загл. с экрана.
	\end{thebibliography}
	\section*{Приложение А. Предобработка данных}
        \begin{center}
	\addcontentsline{toc}{chapter}{\text{Приложение А. Предобработка данных}}
        \end{center}
        \lstinputlisting[language = Python,
                 caption={Формирование единого датасета},
                 label={train_data_csv_all_py}
                ]{train_data_csv_all.py}

	\section*{Приложение Б}
	
	
	
	
\end{document}